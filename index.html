<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فیلم‌بین</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <img src="Logo.png" width="150" height="150" alt=""/>
        <h1>فیلم‌بین</h1>
    </header>
	
	
    <!-- Genre Filter Dropdown -->
    <div class="genre-filter">
        <select id="genre-select" onchange="filterMovies()">
            <option value="all">انتخاب ژانر</option>
            <option value="action">اکشن</option>
            <option value="comedy">کمدی</option>
            <option value="drama">دراما</option>
            <option value="horror">ترسناک</option>
            <option value="romance">عاشقانه</option>
        </select>
    </div>

    <!-- Movie List Section -->
    <div id="movies-container">
        <div class="movies-list" id="movies-list">
            <!-- Movies will be dynamically loaded here -->
        </div>
    </div>

    <!-- Add Movie Button -->
    <button class="add-movie-btn" onclick="showAddMovieForm()">+</button>


    <div id="main-content">
        <div class="movies-grid" id="movies-grid"></div>
        <div class="movie-details" id="movie-details"></div>
    </div>

    <footer>
        <button onclick="location.href='index.html'">خانه</button>
        <button onclick="location.href='library.html'">کتابخانه</button>
        <button onclick="location.href='settings.html'">تنظیمات</button>
        <button onclick="location.href='add.html'">اضافه کردن</button>
        <p>&copy;فیلم بین 1403. تمامی حقوق محفوظ است.</p><br>
    <script src="script.js"></script>
    </footer>
	
	 <div class="add-movie-form" id="add-movie-form" style="display: none;">
        <h2>اضافه کردن فیلم جدید</h2>
        <form onsubmit="addMovie(event)">
            <label for="movie-title">نام:</label>
            <input type="text" id="movie-title" required>
            <label for="movie-genre">ژانر:</label>
            <input type="text" id="movie-genre" required>
            <label for="movie-rating">رتبه بندی:</label>
            <input type="number" id="movie-rating" min="0" max="10" step="0.1" required>
            <label for="movie-description">توضیحات:</label>
            <textarea id="movie-description" rows="4" required></textarea>
            <button type="submit">اضافه کردن</button>
        </form>
        <button onclick="closeAddMovieForm()">Cancel</button>
    </div>

    <script>
const movies = [
    { title: 'Inception', genre: 'Action', rating: 8.8, description: 'یک دزد اسرار را از طریق اشتراک‌گذاری رویاها می‌دزدد.' },
    { title: 'The Notebook', genre: 'Romance', rating: 7.8, description: 'داستانی از عشق و از دست دادن در طول زمان.' },
    { title: 'Get Out', genre: 'Horror', rating: 7.7, description: 'مردی اسرار وحشتناکی درباره خانواده دخترش کشف می‌کند.' },
    { title: 'Superbad', genre: 'Comedy', rating: 7.6, description: 'دوست‌های دبیرستانی تلاش می‌کنند قبل از دانشگاه جشن بگیرند.' },
    { title: 'The Dark Knight', genre: 'Action', rating: 9.0, description: 'بتمن با بزرگترین دشمن خود، جوکر، روبرو می‌شود.' },
    { title: 'Pride and Prejudice', genre: 'Romance', rating: 8.1, description: 'عشق و طبقه اجتماعی در انگلستان قرن 19 برخورد می‌کنند.' },
    { title: 'A Quiet Place', genre: 'Horror', rating: 7.5, description: 'یک خانواده باید سکوت کنند تا از موجودات مرگبار جان سالم به در ببرند.' },
    { title: '21 Jump Street', genre: 'Comedy', rating: 7.2, description: 'دو پلیس به‌طور مخفیانه در یک دبیرستان فعالیت می‌کنند.' },
    { title: 'Mad Max: Fury Road', genre: 'Action', rating: 8.1, description: 'یک جنگ جاده‌ای در دنیای پساآپوکالیپتیک برای بقا.' },
    { title: 'Titanic', genre: 'Romance', rating: 7.8, description: 'داستان عاشقانه‌ای که در کشتی تایتانیک رخ می‌دهد.' },
    { title: 'The Conjuring', genre: 'Horror', rating: 7.5, description: 'محققان ماورایی به خانواده‌ای در بحران کمک می‌کنند.' },
    { title: 'The Hangover', genre: 'Comedy', rating: 7.7, description: 'دوستان در لاس وگاس از شب گذشته هیچ خاطره‌ای ندارند.' },
    { title: 'John Wick', genre: 'Action', rating: 7.4, description: 'یک آدمکش بازنشسته به دنبال انتقام است.' },
    { title: 'La La Land', genre: 'Romance', rating: 8.0, description: 'یک نوازنده جاز و بازیگر در لس آنجلس عاشق یکدیگر می‌شوند.' },
    { title: 'Hereditary', genre: 'Horror', rating: 7.3, description: 'یک خانواده پس از یک تراژدی، اسرار تاریکی را کشف می‌کند.' },
    { title: 'Step Brothers', genre: 'Comedy', rating: 6.9, description: 'دو مرد بالغ به ناتنی تبدیل می‌شوند و هرج و مرج رخ می‌دهد.' },
    { title: 'Avengers: Endgame', genre: 'Action', rating: 8.4, description: 'انتقام‌جویان برای یک نبرد نهایی جمع می‌شوند.' },
    { title: 'The Fault in Our Stars', genre: 'Romance', rating: 7.7, description: 'دو نوجوان در حالی که با سرطان مبارزه می‌کنند عاشق یکدیگر می‌شوند.' },
    { title: 'The Shining', genre: 'Horror', rating: 8.4, description: 'مردی به تدریج در یک هتل دورافتاده به جنون می‌رود.' },
    { title: 'Anchorman', genre: 'Comedy', rating: 7.2, description: 'ماجراهای یک تیم خبری در دهه 1970.' },
    { title: 'Spider-Man: No Way Home', genre: 'Action', rating: 8.3, description: 'اسپایدرمن با چالش‌های چندجهانی روبرو می‌شود.' },
    { title: 'Crazy, Stupid, Love.', genre: 'Romance', rating: 7.4, description: 'مردی پس از جدایی از همسرش با عشق روبرو می‌شود.' },
    { title: 'Us', genre: 'Horror', rating: 6.9, description: 'یک خانواده توسط دوقلوهای شیطانی خود مورد ترور قرار می‌گیرد.' },
    { title: 'Borat', genre: 'Comedy', rating: 7.3, description: 'سفر تمسخرآمیز یک روزنامه‌نگار قزاق در آمریکا.' },
    { title: 'Black Panther', genre: 'Action', rating: 7.3, description: 'پادشاه واکاندا از مردم خود دفاع می‌کند.' },
    { title: 'Me Before You', genre: 'Romance', rating: 7.4, description: 'یک مراقب عاشق کارفرمای معلول خود می‌شود.' },
    { title: 'It Follows', genre: 'Horror', rating: 6.8, description: 'یک زن جوان توسط یک نیروی ماورایی تعقیب می‌شود.' },
    { title: 'The Grand Budapest Hotel', genre: 'Comedy', rating: 8.1, description: 'ماجراهای یک پیشخدمت هتل و شاگرد او.' },
    { title: 'Mission: Impossible - Fallout', genre: 'Action', rating: 7.8, description: 'ایتان هانت در ماموریتی خطرناک‌تر از همیشه قرار می‌گیرد.' },
    { title: 'The Vow', genre: 'Romance', rating: 6.8, description: 'مردی به همسرش کمک می‌کند تا پس از فراموشی دوباره عشقشان را بیابد.' },
    { title: 'Midsommar', genre: 'Horror', rating: 7.1, description: 'گروهی در یک جشن ترسناک در سوئد شرکت می‌کنند.' },
    { title: 'Clueless', genre: 'Comedy', rating: 6.8, description: 'یک نوجوان شیک‌پوش عشق و دوستی را در زندگی دبیرستانی‌اش هدایت می‌کند.' },
    { title: 'The Bourne Identity', genre: 'Action', rating: 7.9, description: 'یک جاسوس مبتلا به فراموشی به دنبال هویت خود است.' },
    { title: 'A Star is Born', genre: 'Romance', rating: 7.6, description: 'یک نوازنده به یک خواننده جوان کمک می‌کند تا به شهرت برسد.' },
    { title: 'Sinister', genre: 'Horror', rating: 6.8, description: 'یک نویسنده فیلم‌های disturbing را در خانه‌اش کشف می‌کند.' },
    { title: 'The Truman Show', genre: 'Comedy', rating: 8.1, description: 'مردی متوجه می‌شود که زندگی‌اش یک برنامه تلویزیونی است.' },
    { title: 'Casino Royale', genre: 'Action', rating: 8.0, description: 'جیمز باند در یک بازی پوکر پرخطر شرکت می‌کند.' },
    { title: 'The Holiday', genre: 'Romance', rating: 6.9, description: 'دو زن خانه‌های خود را عوض می‌کنند و عاشق می‌شوند.' },
    { title: 'The Ring', genre: 'Horror', rating: 7.1, description: 'یک نوار ویدیویی نفرین‌شده به یک سری مرگ‌ها منجر می‌شود.' },
    { title: 'Napoleon Dynamite', genre: 'Comedy', rating: 6.9, description: 'یک نوجوان عجیب و غریب زندگی دبیرستانی خود را طی می‌کند.' },
    { title: 'The Avengers', genre: 'Action', rating: 8.0, description: 'قوی‌ترین قهرمانان زمین برای مبارزه با تهدید بیگانه متحد می‌شوند.' },
    { title: 'Romeo + Juliet', genre: 'Romance', rating: 6.7, description: 'یک بازنگری مدرن از تراژدی شکسپیر.' },
    { title: 'The Cabin in the Woods', genre: 'Horror', rating: 7.0, description: 'نوجوانان با اسرار ترسناکی در یک کلبه دورافتاده مواجه می‌شوند.' },
    { title: 'Game Night', genre: 'Comedy', rating: 7.0, description: 'یک شب بازی به یک ماجرای واقعی معما تبدیل می‌شود.' },
    { title: 'Top Gun: Maverick', genre: 'Action', rating: 8.3, description: 'پیت میچل یک نسل جدید از خلبان‌ها را آموزش می‌دهد.' },
    { title: 'Before Sunrise', genre: 'Romance', rating: 8.1, description: 'یک ملاقات تصادفی ارتباط عمیقی را آغاز می‌کند.' },
    { title: 'The Others', genre: 'Horror', rating: 7.6, description: 'یک مادر و فرزندانش یک راز ترسناک را کشف می‌کنند.' },
];



        function displayMovies(filteredMovies = movies) {
            const moviesList = document.getElementById('movies-list');
            moviesList.innerHTML = '';
            filteredMovies.forEach(movie => {
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.innerHTML = `
                    <h3>${movie.title}</h3>
                    <p><strong>Genre:</strong> ${movie.genre}</p>
                    <p><strong>Rating:</strong> ${movie.rating}</p>
                    <p>${movie.description}</p>
                `;
                moviesList.appendChild(movieCard);
            });
        }

        function filterMovies() {
    const genre = document.getElementById('genre-select').value;
    
    // If "all" is selected, display all movies
    if (genre === 'all') {
        displayMovies(movies);
    } else {
        const filteredMovies = movies.filter(movie => movie.genre.toLowerCase() === genre.toLowerCase());
        displayMovies(filteredMovies);
    }
}

        function showAddMovieForm() {
            document.getElementById('add-movie-form').style.display = 'block';
        }

        function closeAddMovieForm() {
            document.getElementById('add-movie-form').style.display = 'none';
        }

        function addMovie(event) {
            event.preventDefault();
            const title = document.getElementById('movie-title').value;
            const genre = document.getElementById('movie-genre').value;
            const rating = parseFloat(document.getElementById('movie-rating').value);
            const description = document.getElementById('movie-description').value;
            movies.push({ title, genre, rating, description });
            displayMovies();
            closeAddMovieForm();
        }

        window.onload = () => {
            displayMovies();
        };
    </script>

    <script>
        async function fetchMovies() {
            try {
                const response = await fetch('http://localhost:8080/movies');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const movies = await response.json();
                displayMovies(movies);
            } catch (error) {
                console.error('Error fetching movies:', error);
            }
        }

        function displayMovies(movies) {
            const grid = document.getElementById('movies-grid');
            const details = document.getElementById('movie-details');
            grid.innerHTML = '';
            details.style.display = 'none';

            movies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.innerHTML = `
                    <img src="${movie.image || 'placeholder.jpg'}" alt="${movie.title}">
                    <h3>${movie.title}</h3>
                `;
                card.addEventListener('click', () => showMovieDetails(movie));
                grid.appendChild(card);
            });
        }

        function showMovieDetails(movie) {
            const grid = document.getElementById('movies-grid');
            const details = document.getElementById('movie-details');
            grid.style.display = 'none';
            details.style.display = 'block';
            details.innerHTML = `
                <a href="#" class="back-button" onclick="fetchMovies()">Back to Movies</a>
                <h2>${movie.title}</h2>
                <p><strong>Genre:</strong> ${movie.genre}</p>
                <p><strong>Rating:</strong> ${movie.rating}</p>
                <p><strong>Description:</strong> ${movie.description || 'No description available.'}</p>
            `;
        }

        fetchMovies();
    </script>
</body>
</html>
